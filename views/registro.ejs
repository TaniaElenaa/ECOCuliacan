<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - Eco Culiacán</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/ECO.png">
</head>
<body>

<header class="encabezado">
    <div class="logo">
        <a href="/"><img src="/images/ECO.png" alt="Logo Eco Culiacán" class="logo"/><span></span></a>
    </div>
    <a href="/login"><button class="btn-iniciar-sesion">Iniciar Sesión</button></a>
</header>

<div class="contenedor-principal-centrado">
    <main class="contenedor-registro">
        <div class="iconousuario-container">
            <img src="/images/usuario.png" alt="Icono de Usuario" class="iconousuario-img">
        </div>

        <h1>Registrarse</h1>

        <% if (success_msg && success_msg.length > 0) { %>
            <div class="flash-message success">
                <%= success_msg %>
            </div>
        <% } %>
        <% if (error_msg && error_msg.length > 0) { %>
            <div class="flash-message error">
                <%= error_msg %>
            </div>
        <% } %>

        <% if (typeof errors != 'undefined' && errors.length > 0) { %>
            <ul class="error-list">
                <% errors.forEach(function(error) { %>
                    <li><%= error.msg %></li>
                <% }); %>
            </ul>
        <% } %>

        <form class="formulario" action="/registro" method="POST">
            <label for="usuario">Usuario</label>
            <input type="text" id="usuario" name="username" placeholder="Ingresa tu usuario" required value="<%= typeof username != 'undefined' ? username : '' %>"/> 
            
            <label for="password">Contraseña</label>
            <div class="password-container">
                <input type="password" id="password" name="password" placeholder="Mínimo 6 caracteres" required value="<%= typeof password != 'undefined' ? password : '' %>"/> 
                <span class="toggle-password" onclick="togglePasswordVisibility('password', this)">
                    <img src="/images/ojoff.png" alt="Mostrar/Ocultar Contraseña" id="toggleIconPassword">
                </span>
            </div>

            <label for="confirmPassword">Confirmar Contraseña</label>
            <div class="password-container">
                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Repite contraseña" required value="<%= typeof confirmPassword != 'undefined' ? confirmPassword : '' %>"/> 
                <span class="toggle-password" onclick="togglePasswordVisibility('confirmPassword', this)">
                    <img src="/images/ojoff.png" alt="Mostrar/Ocultar Contraseña" id="toggleIconConfirm">
                </span>
            </div>

            <label for="gender">Género</label>
            <select id="gender" name="gender" required>
                <option value="">Selecciona tu género</option>
                <option value="male" <%= typeof gender != 'undefined' && gender === 'male' ? 'selected' : '' %>>Masculino</option>
                <option value="female" <%= typeof gender != 'undefined' && gender === 'female' ? 'selected' : '' %>>Femenino</option>
                <option value="prefer_not_to_say" <%= typeof gender != 'undefined' && gender === 'prefer_not_to_say' ? 'selected' : '' %>>Prefiero no decirlo</option>
            </select>

            <button type="submit" class="btn-registrar">Registrarme</button>
        </form>
        <p style="margin-top: 20px;">¿Ya tienes una cuenta? <a href="/login">Iniciar Sesión</a></p>
    </main>
</div>

<footer class="pie">
    <p><em>Menos basura, más futuro</em></p>
    <a href="https://ECOCuliacan.com.mx/" target="_blank">ECOCuliacán.com.mx</a>
    <div class="redes">
            <a href="https://www.facebook.com/share/16Je91rWsc" target="_blank"><img src="/images/facebook.png" alt="Facebook" class="social-icon"></a>
            <a href="https://x.com/ECOCuliacan" target="_blank"><img src="/images/twitter.png" alt="Twitter" class="social-icon"></a>
            <a href="https://www.instagram.com/eco.culiacan/profilecard/" target="_blank"><img src="/images/ig.png" alt="Instagram" class="social-icon"></a>
    </div>
</footer>

<script src="/events.js"></script>

</body>
</html>
